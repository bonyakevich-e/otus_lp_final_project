---
# tasks file for webserver
#
- name: install prerequisites
  ansible.builtin.apt:
    name:
      - apache2
      - libapache2-mod-php
      - php-gd
      - php-mysql
      - php-curl
      - php-mbstring
      - php-intl
      - php-gmp
      - php-bcmath
      - php-xml
      - php-imagick
      - php-zip
    state: present
    update_cache: true

- name: install nfs-common
  ansible.builtin.apt:
    name:
      - nfs-common
    state: present

- name: mount storage to /var/www
  ansible.posix.mount:
    src: 192.168.56.30:/storage/webserver
    path: /var/www
    opts: rw,sync,hard
    state: mounted
    fstype: nfs
